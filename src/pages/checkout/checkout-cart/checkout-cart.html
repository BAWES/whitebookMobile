<!--
  Generated template for the CheckoutCart page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-toolbar>
    <ion-title>
      Cart
    </ion-title>
    <ion-buttons start>
      <button ion-button (click)="dismiss()">
        <ion-icon name="md-close"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content padding>

  <ion-list class="header" *ngIf="isUserLoggedIn">
      <ion-col width-36-inline-block>
          <strong>Image</strong>
      </ion-col>
      <ion-col width-57-inline-block>
          <strong>Detail</strong>
      </ion-col>
      <ion-col width-10 text-center close-btn position-relative>
      </ion-col>
  </ion-list>
  <div class="" approxItemHeight="40px" *ngIf="isUserLoggedIn && cartItems">
  
  <ion-list *ngFor="let item of cartItems" >
    <ion-row class="header">
        <ion-col width-20 position-relative>
            <img src="{{_config.images_210}}/{{item.image_path}}">
        </ion-col>
        <ion-col width-70 class="button-container">
            <h3>{{item.item_name}}</h3>
            <ion-label> QTY :  {{item.cart_quantity}}</ion-label>
            <ion-label> Date : {{item.cart_delivery_date}}</ion-label>
            <ion-label> Time :  {{item.time_slot}}</ion-label>
            <ion-label> Vendor :  {{item.vendor}}</ion-label>
            <h2>Price : KD {{item.item_price_per_unit}}</h2>
        </ion-col>
        <ion-col width-10 text-center close-btn position-relative>
            <ion-icon (click)="removeItem(item.cart_id)" name="close"></ion-icon>
        </ion-col>
        <br/>
        <br/>
      <ion-col width-70 class="button-container" *ngIf="item.options.length">
          <small>Options</small>
          <ion-label *ngFor="let option of item.options" > <small>{{option.menu_item_name}} X {{option.quantity}}</small></ion-label>
      </ion-col>
      <ion-col width-70 class="button-container" *ngIf="item.addons.length">
          <small>addons</small>
          <ion-label *ngFor="let addon of item.addons" > <small>{{addon.menu_item_name}} X {{addon.quantity}}</small></ion-label>
      </ion-col>
      <ion-col width-70 class="button-container" *ngIf="item.addons.length">
          <small>customs</small>
          <ion-label *ngFor="let custom of item.customs" > 
            <small>{{custom.question}}</small>
            <small>{{custom.answer}}</small>
          </ion-label>
      </ion-col>
    </ion-row>
  </ion-list>
  
  <ion-list summary *ngIf="summary" >
    <ion-list border>
      <ion-item  *ngIf="summary.subtotal">
        <ion-label><strong> Total</strong></ion-label>
        <ion-label>{{summary.subtotal}}</ion-label>
      </ion-item>
    </ion-list>
    <ion-list *ngIf="delivery_vendors">
      <ion-item *ngFor="let cost of delivery_vendors" >
        <ion-label>Delivery Charge <small>({{cost.vendor}})</small></ion-label>
        <ion-label>{{cost.charges}}</ion-label>
      </ion-item>
    </ion-list>
    <ion-list>
      <ion-item  *ngIf="summary.total">
        <ion-label><strong>Total</strong></ion-label>
        <ion-label>{{summary.total}}</ion-label>
      </ion-item>
    </ion-list>
</ion-list>

  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content></ion-infinite-scroll-content>
  </ion-infinite-scroll>
</div>

<div class="" *ngIf="!isUserLoggedIn"></div>
  <ion-item text-center checkout-btn *ngIf="isUserLoggedIn">
    <button ion-button round width-99 padding color="dark" (click)="shippingModelPage()"> Checkout</button>
  </ion-item>
</ion-content>

<ion-content *ngIf="(carItems !== undefined && !carItems.length)" class="no-results">
    <p text-center>No Results</p>
</ion-content>

<ion-content *ngIf="!isUserLoggedIn" class="no-results">
    <p text-center>Please Login to add to cart item</p>
</ion-content>
